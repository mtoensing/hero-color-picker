(()=>{"use strict";const e=window.wp.plugins,o=window.wp.editor,r=window.wp.i18n,t=window.wp.components,n=window.wp.data,i=window.ReactJSXRuntime,l="hero_color_picker_hero_color",s="hero_color_picker_font_color";function c(e){if("string"!=typeof e)return null;const o=e.trim().replace("#",""),r=3===o.length?o.split("").map(e=>e+e).join(""):o;return/^[0-9a-fA-F]{6}$/.test(r)?{r:parseInt(r.slice(0,2),16),g:parseInt(r.slice(2,4),16),b:parseInt(r.slice(4,6),16)}:null}function d(e){const o=e/255;return o<=.03928?o/12.92:((o+.055)/1.055)**2.4}function a(e){return.2126*d(e.r)+.7152*d(e.g)+.0722*d(e.b)}function p({label:e,value:o,onChange:n,onReset:l,resetText:s}){return(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsx)("div",{style:{marginBottom:8},children:e}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,i.jsx)(t.Dropdown,{popoverProps:{placement:"left-start"},renderToggle:({isOpen:e,onToggle:n})=>(0,i.jsxs)(t.Button,{variant:"secondary",onClick:n,"aria-expanded":e,style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{children:o||(0,r.__)("Select color","hero-color-picker")}),(0,i.jsx)("span",{"aria-hidden":!0,style:{display:"inline-block",marginLeft:8,width:14,height:14,borderRadius:2,border:"1px solid #ccc",backgroundColor:o||"transparent"}})]}),renderContent:()=>(0,i.jsx)("div",{style:{padding:8},children:(0,i.jsx)(t.ColorPicker,{color:o||"#111111",enableAlpha:!1,onChange:n})})}),(0,i.jsx)(t.Button,{variant:"secondary",isDestructive:!0,onClick:l,disabled:!o,children:s})]})]})}(0,e.registerPlugin)("hero-color-picker",{render:function(){const{meta:e,postType:d}=(0,n.useSelect)(e=>{const o=e("core/editor");return{meta:o.getEditedPostAttribute("meta")||{},postType:o.getCurrentPostType()}},[]),{editPost:h}=(0,n.useDispatch)("core/editor");if("post"!==d)return null;const u=e[l]||"",g=e[s]||"",x=function(e,o){const r=c(e),t=c(o);if(!r||!t)return null;const n=a(r),i=a(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}(g,u),m=null!==x&&x>=7;return(0,i.jsx)(o.PluginDocumentSettingPanel,{name:"hero-color-picker",title:"Hero Color Picker",className:"hero-color",children:(0,i.jsx)(t.PanelRow,{children:(0,i.jsxs)("div",{style:{width:"100%"},children:[(0,i.jsx)(p,{label:(0,r.__)("Background Color","hero-color-picker"),value:u,onChange:o=>{h({meta:{...e,[l]:o}})},onReset:()=>{h({meta:{...e,[l]:""}})},resetText:(0,r.__)("Unset","hero-color-picker")}),(0,i.jsx)(p,{label:(0,r.__)("Font Color","hero-color-picker"),value:g,onChange:o=>{h({meta:{...e,[s]:o}})},onReset:()=>{h({meta:{...e,[s]:""}})},resetText:(0,r.__)("Unset","hero-color-picker")}),(0,i.jsxs)("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px solid #ddd"},children:[(0,i.jsx)("div",{style:{marginBottom:4},children:(0,r.__)("WCAG AAA Normal Text Contrast Ratio","hero-color-picker")}),(0,i.jsx)("div",{style:{fontWeight:600,color:m?"#0a7d23":"#b32d2e"},children:m?(0,r.__)("PASS","hero-color-picker"):(0,r.__)("FAILED","hero-color-picker")}),(0,i.jsxs)("div",{style:{marginTop:10,padding:10,borderRadius:4,border:"1px solid #dcdcde",backgroundColor:u||"#f0f0f1",color:g||"#1e1e1e"},children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:4},children:(0,r.__)("Preview","hero-color-picker")}),(0,i.jsx)("div",{children:(0,r.__)("This is how background and font color look together.","hero-color-picker")})]})]})]})})})}})})();